"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[97429],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=s(n),g=r,c=m["".concat(o,".").concat(g)]||m[g]||u[g]||l;return n?a.createElement(c,p(p({ref:t},d),{},{components:n})):a.createElement(c,p({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,p=new Array(l);p[0]=g;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[m]="string"==typeof e?e:r,p[1]=i;for(var s=2;s<l;s++)p[s]=n[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},11292:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const l={},p="Swagger",i={unversionedId:"extensions/swagger",id:"extensions/swagger",title:"Swagger",description:"\u57fa\u4e8e\u6700\u65b0\u7684 OpenAPI 3.0.3 \u5b9e\u73b0\u4e86\u65b0\u7248\u7684 Swagger \u7ec4\u4ef6\u3002",source:"@site/docs/extensions/swagger.md",sourceDirName:"extensions",slug:"/extensions/swagger",permalink:"/docs/extensions/swagger",draft:!1,editUrl:"https://github.com/midwayjs/midway/tree/main/site/docs/extensions/swagger.md",tags:[],version:"current",frontMatter:{},sidebar:"component",previous:{title:"\u53c2\u6570\u6821\u9a8c",permalink:"/docs/extensions/validate"},next:{title:"\u4efb\u52a1\u961f\u5217",permalink:"/docs/extensions/bull"}},o={},s=[{value:"\u5b89\u88c5\u4f9d\u8d56",id:"\u5b89\u88c5\u4f9d\u8d56",level:2},{value:"\u5f00\u542f\u7ec4\u4ef6",id:"\u5f00\u542f\u7ec4\u4ef6",level:2},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:2},{value:"\u81ea\u52a8\u7c7b\u578b\u63d0\u53d6",id:"\u81ea\u52a8\u7c7b\u578b\u63d0\u53d6",level:3},{value:"\u7c7b\u578b\u548c Schema",id:"\u7c7b\u578b\u548c-schema",level:3},{value:"\u57fa\u7840\u7c7b\u578b",id:"\u57fa\u7840\u7c7b\u578b",level:3},{value:"\u6570\u7ec4\u7c7b\u578b",id:"\u6570\u7ec4\u7c7b\u578b",level:3},{value:"\u679a\u4e3e\u7c7b\u578b",id:"\u679a\u4e3e\u7c7b\u578b",level:3},{value:"\u590d\u6742\u5bf9\u8c61\u7c7b\u578b",id:"\u590d\u6742\u5bf9\u8c61\u7c7b\u578b",level:3},{value:"\u590d\u6742\u5bf9\u8c61\u6570\u7ec4\u7c7b\u578b",id:"\u590d\u6742\u5bf9\u8c61\u6570\u7ec4\u7c7b\u578b",level:3},{value:"\u5faa\u73af\u4f9d\u8d56",id:"\u5faa\u73af\u4f9d\u8d56",level:3},{value:"\u8bf7\u6c42\u5b9a\u4e49",id:"\u8bf7\u6c42\u5b9a\u4e49",level:2},{value:"Query \u5b9a\u4e49",id:"query-\u5b9a\u4e49",level:3},{value:"Body \u5b9a\u4e49",id:"body-\u5b9a\u4e49",level:3},{value:"\u6587\u4ef6\u4e0a\u4f20\u5b9a\u4e49",id:"\u6587\u4ef6\u4e0a\u4f20\u5b9a\u4e49",level:3},{value:"\u8bf7\u6c42 Header",id:"\u8bf7\u6c42-header",level:3},{value:"\u8bf7\u6c42 Response",id:"\u8bf7\u6c42-response",level:3},{value:"\u6cdb\u578b\u8fd4\u56de\u6570\u636e",id:"\u6cdb\u578b\u8fd4\u56de\u6570\u636e",level:3},{value:"\u66f4\u591a\u7684\u5b9a\u4e49\u793a\u4f8b",id:"\u66f4\u591a\u7684\u5b9a\u4e49\u793a\u4f8b",level:2},{value:"\u66f4\u591a\u914d\u7f6e",id:"\u66f4\u591a\u914d\u7f6e",level:2},{value:"\u8def\u7531\u6807\u7b7e",id:"\u8def\u7531\u6807\u7b7e",level:3},{value:"\u6388\u6743\u9a8c\u8bc1",id:"\u6388\u6743\u9a8c\u8bc1",level:3},{value:"basic",id:"basic",level:4},{value:"bearer",id:"bearer",level:4},{value:"oauth2",id:"oauth2",level:4},{value:"cookie",id:"cookie",level:4},{value:"apikey",id:"apikey",level:4},{value:"custom \u9a8c\u8bc1",id:"custom-\u9a8c\u8bc1",level:4},{value:"\u5ffd\u7565\u8def\u7531",id:"\u5ffd\u7565\u8def\u7531",level:3},{value:"\u5b8c\u6574\u53c2\u6570\u914d\u7f6e",id:"\u5b8c\u6574\u53c2\u6570\u914d\u7f6e",level:3},{value:"\u88c5\u9970\u5668\u5217\u8868",id:"\u88c5\u9970\u5668\u5217\u8868",level:2},{value:"UI \u6e32\u67d3",id:"ui-\u6e32\u67d3",level:2},{value:"\u4ece Swagger-ui-dist \u6e32\u67d3",id:"\u4ece-swagger-ui-dist-\u6e32\u67d3",level:3},{value:"\u4ece unpkg \u7b49 CDN \u5730\u5740\u6e32\u67d3",id:"\u4ece-unpkg-\u7b49-cdn-\u5730\u5740\u6e32\u67d3",level:3},{value:"\u4ec5\u63d0\u4f9b Swagger JSON",id:"\u4ec5\u63d0\u4f9b-swagger-json",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"<code>@Get</code> \u7b49\u8def\u7531\u6ce8\u89e3\u4e2d\u7684 <code>summary</code> \u6216\u8005 <code>description</code> \u4e0d\u751f\u6548",id:"get-\u7b49\u8def\u7531\u6ce8\u89e3\u4e2d\u7684-summary-\u6216\u8005-description-\u4e0d\u751f\u6548",level:3}],d={toc:s},m="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"swagger"},"Swagger"),(0,r.kt)("p",null,"\u57fa\u4e8e\u6700\u65b0\u7684 ",(0,r.kt)("a",{parentName:"p",href:"https://swagger.io/specification/"},"OpenAPI 3.0.3")," \u5b9e\u73b0\u4e86\u65b0\u7248\u7684 Swagger \u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u76f8\u5173\u4fe1\u606f\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u53ef\u7528\u4e8e\u6807\u51c6\u9879\u76ee"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u53ef\u7528\u4e8e Serverless"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u53ef\u7528\u4e8e\u4e00\u4f53\u5316"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5305\u542b\u72ec\u7acb\u4e3b\u6846\u67b6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5305\u542b\u72ec\u7acb\u65e5\u5fd7"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")))),(0,r.kt)("h2",{id:"\u5b89\u88c5\u4f9d\u8d56"},"\u5b89\u88c5\u4f9d\u8d56"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm install @midwayjs/swagger@3 --save\n$ npm install swagger-ui-dist --save-dev\n")),(0,r.kt)("p",null,"\u5982\u679c\u60f3\u8981\u5728\u670d\u52a1\u5668\u4e0a\u8f93\u51fa Swagger API \u9875\u9762\uff0c\u5219\u9700\u8981\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-ui-dist")," \u5b89\u88c5\u5230\u4f9d\u8d56\u4e2d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm install swagger-ui-dist --save\n")),(0,r.kt)("p",null,"\u6216\u8005\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," \u4e2d\u589e\u52a0\u5982\u4e0b\u4f9d\u8d56\u540e\uff0c\u91cd\u65b0\u5b89\u88c5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "dependencies": {\n    "@midwayjs/swagger": "^3.0.0",\n    // \u5982\u679c\u4f60\u5e0c\u671b\u5728\u670d\u52a1\u5668\u4e0a\u4f7f\u7528\n    "swagger-ui-dist": "^4.2.1",\n    // ...\n  },\n  "devDependencies": {\n    // \u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u5728\u670d\u52a1\u5668\u4e0a\u4f7f\u7528\n    "swagger-ui-dist": "^4.2.1",\n    // ...\n  }\n}\n')),(0,r.kt)("h2",{id:"\u5f00\u542f\u7ec4\u4ef6"},"\u5f00\u542f\u7ec4\u4ef6"),(0,r.kt)("p",null,"\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"configuration.ts")," \u4e2d\u589e\u52a0\u7ec4\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Configuration } from '@midwayjs/core';\nimport * as swagger from '@midwayjs/swagger';\n\n@Configuration({\n  imports: [\n    // ...\n    swagger\n  ]\n})\nexport class MainConfiguration {\n\n}\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u914d\u7f6e\u542f\u7528\u7684\u73af\u5883\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u6307\u7684\u662f ",(0,r.kt)("strong",{parentName:"p"},"\u53ea\u5728 local \u73af\u5883\u4e0b\u542f\u7528"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Configuration } from '@midwayjs/core';\nimport * as swagger from '@midwayjs/swagger';\n\n@Configuration({\n  imports: [\n    // ...\n    {\n      component: swagger,\n      enabledEnvironment: ['local']\n    }\n  ]\n})\nexport class MainConfiguration {\n\n}\n")),(0,r.kt)("p",null,"\u7136\u540e\u542f\u52a8\u9879\u76ee\uff0c\u8bbf\u95ee\u5730\u5740\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"UI: ",(0,r.kt)("a",{parentName:"li",href:"http://127.0.0.1:7001/swagger-ui/index.html"},"http://127.0.0.1:7001/swagger-ui/index.html")),(0,r.kt)("li",{parentName:"ul"},"JSON: ",(0,r.kt)("a",{parentName:"li",href:"http://127.0.0.1:7001/swagger-ui/index.json"},"http://127.0.0.1:7001/swagger-ui/index.json"))),(0,r.kt)("p",null,"\u8def\u5f84\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"swaggerPath")," \u53c2\u6570\u914d\u7f6e\u3002"),(0,r.kt)("h2",{id:"\u6570\u636e\u7c7b\u578b"},"\u6570\u636e\u7c7b\u578b"),(0,r.kt)("h3",{id:"\u81ea\u52a8\u7c7b\u578b\u63d0\u53d6"},"\u81ea\u52a8\u7c7b\u578b\u63d0\u53d6"),(0,r.kt)("p",null,"Swagger \u7ec4\u4ef6\u4f1a\u8bc6\u522b\u5404\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"@Controller")," \u4e2d\u6bcf\u4e2a\u8def\u7531\u65b9\u6cd5\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"@Body()"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"@Query()"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"@Param()")," \u88c5\u9970\u5668\uff0c\u63d0\u53d6\u8def\u7531\u65b9\u6cd5\u53c2\u6570\u548c\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@Get('/')\nasync home(\n  @Query('uid') uid: number,\n  @Query('tid') tid: string,\n  @Query('isBoolean') isBoolean: boolean,\n) {\n    // ...\n}\n")),(0,r.kt)("p",null,"\u57fa\u7840\u7684\u5e03\u5c14\uff0c\u5b57\u7b26\u4e32\uff0c\u6570\u5b57\u7c7b\u578b\u5c55\u793a\u6548\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i2/O1CN01KGk0B325xe6cV5HCo_!!6000000007593-2-tps-1110-854.png",alt:null})),(0,r.kt)("h3",{id:"\u7c7b\u578b\u548c-schema"},"\u7c7b\u578b\u548c Schema"),(0,r.kt)("p",null,"\u6211\u4eec\u5e38\u5728\u53c2\u6570\u4f7f\u7528\u5bf9\u8c61\uff0c\u5e76\u4f7f\u7528\u5b9a\u4e49\u597d\u7684\u7c7b\u4f5c\u4e3a\u7c7b\u578b\uff0c\u8fd9\u4e2a\u65f6\u5019 swagger \u7ec4\u4ef6\u4e5f\u80fd\u81ea\u52a8\u8bc6\u522b\uff0c\u540c\u65f6\u4e5f\u80fd\u548c\u666e\u901a\u7684\u7c7b\u578b\u8fdb\u884c\u7ec4\u5408\u8bc6\u522b\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@Post('/:id', { summary: 'test'})\nasync create(@Body() createCatDto: CreateCatDto, @Param('id') id: number) {\n  // ...\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"CreateCatDto")," \u7c7b\u578b\u7684\u5b9a\u4e49\u5982\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"ApiProperty")," \u5c06\u5176\u4e2d\u7684\u6bcf\u4e2a\u5c5e\u6027\u90fd\u8fdb\u884c\u4e86\u5b9a\u4e49\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { ApiProperty } from \"@midwayjs/swagger\";\n\nexport class CreateCatDto {\n  @ApiProperty({ example: 'Kitty', description: 'The name of the Catname'})\n  name: string;\n\n  @ApiProperty({ example: '1', description: 'The name of the Catage'})\n  age: number;\n\n  @ApiProperty({ example: 'bbbb', description: 'The name of the Catbreed'})\n  breed: string;\n}\n")),(0,r.kt)("p",null,"\u6548\u679c\u5982\u4e0b\uff0c\u7ec4\u4ef6\u4f1a\u81ea\u52a8\u63d0\u53d6\u5176\u4e2d\u7684\u4e24\u4e2a\u53c2\u6570\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i2/O1CN01qpyb7k1uheVEFq8CI_!!6000000006069-2-tps-1220-1046.png",alt:"swagger1"})),(0,r.kt)("p",null,"\u540c\u65f6\uff0c\u7531\u4e8e\u5728\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u6bcf\u4e2a\u5c5e\u6027\u7684 example\uff0c\u4f1a\u81ea\u52a8\u586b\u5165\u793a\u4f8b\u503c\u3002"),(0,r.kt)("p",null,"\u5728 Swagger \u4e2d\uff0c\u6bcf\u4e2a\u7c7b\u578b\u90fd\u4f1a\u6709\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Schema")," \u6765\u63cf\u8ff0\uff0c\u6211\u4eec\u5df2\u7ecf\u5b9a\u4e49\u4e86\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"CreateCatDto")," \u7684 Schema\uff0c\u770b\u8d77\u6765\u5c31\u50cf\u662f\u4e0b\u9762\u7684\u6837\u5b50\u3002"),(0,r.kt)("p",null,"\u6ce8\u610f\uff0c\u6211\u4eec\u4f1a\u91cd\u590d\u7528\u5230\u8fd9\u4e9b Schema\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i2/O1CN01iZYONb1tAqW35GM3C_!!6000000005862-2-tps-1050-694.png",alt:"swagger2"})),(0,r.kt)("h3",{id:"\u57fa\u7840\u7c7b\u578b"},"\u57fa\u7840\u7c7b\u578b"),(0,r.kt)("p",null,"\u901a\u8fc7\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiProperty(...)")," \u88c5\u9970\u5668\u4e2d\u8bbe\u7f6e type\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u5e38\u89c1\u7684\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u57fa\u7840\u7c7b\u578b\u65e0\u9700\u663e\u5f0f\u58f0\u660e ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," \uff0c\u53ef\u81ea\u52a8\u8bc6\u522b\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b57\u7b26\u4e32")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiProperty({\n  type: 'string',\n  // ...\n})\nname: string;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5e03\u5c14\u7c7b\u578b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiProperty({\n  type: 'boolean',\n  example: 'true',\n  // ...\n})\nisPure: boolean;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6570\u5b57\u7c7b\u578b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiProperty({\n  type: 'number',\n  example: '1',\n  description: 'The name of the Catage'\n})\nage: number;\n")),(0,r.kt)("p",null,"\u6b64\u5916\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 format \u5b57\u6bb5\u6765\u5b9a\u4e49\u66f4\u4e3a\u7cbe\u786e\u7684\u957f\u5ea6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiProperty({\n  type: 'integer',\n  format: 'int32',\n  example: '1',\n  description: 'The name of the Catage'\n})\nage: number;\n")),(0,r.kt)("h3",{id:"\u6570\u7ec4\u7c7b\u578b"},"\u6570\u7ec4\u7c7b\u578b"),(0,r.kt)("p",null,"\u5982\u679c\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u914d\u7f6e type \u5b57\u6bb5\u6765\u5b9a\u4e49\uff0c\u540c\u65f6\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"items")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," \u6765\u6307\u5b9a\u7c7b\u578b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiProperty({\n  type: 'array',\n  items: {\n    type: 'string',\n  },\n  example: ['1'],\n  description: 'The name of the Catage'\n})\nbreeds: string[];\n")),(0,r.kt)("h3",{id:"\u679a\u4e3e\u7c7b\u578b"},"\u679a\u4e3e\u7c7b\u578b"),(0,r.kt)("p",null,"\u5982\u679c\u662f\u679a\u4e3e\u7c7b\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e enmu \u5b57\u6bb5\u6765\u5b9a\u4e49\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"enum HelloWorld {\n  One = 'One',\n  Two = 'Two',\n  Three = 'Three',\n}\n\n@ApiProperty({\n  enum: ['One', 'Two', 'Three'],\n  description: 'The name of the Catage'\n})\nhello: HelloWorld;\n")),(0,r.kt)("p",null,"\u5982\u679c\u8be5\u5b57\u6bb5\u5728\u6700\u9876\u5c42\uff0c\u5c55\u793a\u6548\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i1/O1CN015M37MU1KgtdNfqsgp_!!6000000001194-0-tps-1406-426.jpg",alt:"swagger3"})),(0,r.kt)("h3",{id:"\u590d\u6742\u5bf9\u8c61\u7c7b\u578b"},"\u590d\u6742\u5bf9\u8c61\u7c7b\u578b"),(0,r.kt)("p",null,"\u5982\u679c\u67d0\u4e2a\u5c5e\u6027\u7684\u7c7b\u578b\u662f\u4e2a\u73b0\u6709\u7684\u590d\u6742\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," \u6765\u6307\u5b9a\u8fd9\u4e2a\u590d\u6742\u7684\u7c7b\u578b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export class Cat {\n  /**\n   * The name of the Catcomment\n   * @example Kitty\n   */\n  @ApiProperty({ example: 'Kitty', description: 'The name of the Cat'})\n  name: string;\n\n  @ApiProperty({ example: 1, description: 'The age of the Cat' })\n  age: number;\n\n  @ApiProperty({ example: '2022-12-12 11:11:11', description: 'The age of the CatDSate' })\n  agedata?: Date;\n\n  @ApiProperty({\n    example: 'Maine Coon',\n    description: 'The breed of the Cat',\n  })\n  breed: string;\n}\n\nexport class CreateCatDto {\n\n  // ...\n\n  @ApiProperty({\n    type: Cat,  // \u8fd9\u91cc\u65e0\u9700\u6307\u5b9a example\n  })\n  related: Cat;\n}\n")),(0,r.kt)("p",null,"\u6548\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i3/O1CN01KADwTb1rkS4gJExuP_!!6000000005669-2-tps-1376-1070.png",alt:null})),(0,r.kt)("h3",{id:"\u590d\u6742\u5bf9\u8c61\u6570\u7ec4\u7c7b\u578b"},"\u590d\u6742\u5bf9\u8c61\u6570\u7ec4\u7c7b\u578b"),(0,r.kt)("p",null,"\u5982\u679c\u67d0\u4e2a\u5c5e\u6027\u7684\u7c7b\u578b\u662f\u4e2a\u590d\u6742\u7684\u6570\u7ec4\u7c7b\u578b\uff0c\u5199\u6cd5\u7565\u6709\u4e0d\u540c\u3002"),(0,r.kt)("p",null,"\u9996\u5148",(0,r.kt)("inlineCode",{parentName:"p"},"type")," \u5fc5\u987b\u58f0\u660e\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"array"),"\uff0c\u9664\u4e86\u8bbe\u7f6e",(0,r.kt)("inlineCode",{parentName:"p"},"type"),"\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"getSchemaPath")," \u65b9\u6cd5\u989d\u5916\u5bfc\u5165\u4e00\u4e2a\u4e0d\u540c\u7684\u7c7b\u578b\uff08\u4e0a\u9762\u7684\u590d\u6742\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b83\u8bbe\u7f6e$ref\uff09\u3002"),(0,r.kt)("p",null,"\u6b64\u5916\uff0c\u5982\u679c ",(0,r.kt)("inlineCode",{parentName:"p"},"Cat")," \u7c7b\u578b\u6ca1\u6709\u5728\u5176\u4ed6\u5c5e\u6027\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," \u5b57\u6bb5\u4e2d\u58f0\u660e\u8fc7\uff0c\u9700\u8981\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiExtraModel")," \u88c5\u9970\u5668\u989d\u5916\u58f0\u660e\u5f15\u5165\u5916\u90e8\u7c7b\u578b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { ApiProperty, getSchemaPath, ApiExtraModel } from '@midwayjs/swagger';\n\nclass Cat {\n  // ...\n}\n\n@ApiExtraModel(Cat)\nexport class CreateCatDto {\n  // ...\n\n  @ApiProperty({\n    type: 'array',\n    items: {\n      $ref: getSchemaPath(Cat),\n    }\n  })\n  relatedList: Cat[];\n}\n\n\n")),(0,r.kt)("p",null,"\u6548\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i1/O1CN01h4sQJ41dP0uq4fgi7_!!6000000003727-2-tps-1332-666.png",alt:null})),(0,r.kt)("h3",{id:"\u5faa\u73af\u4f9d\u8d56"},"\u5faa\u73af\u4f9d\u8d56"),(0,r.kt)("p",null,"\u5f53\u7c7b\u4e4b\u95f4\u5177\u6709\u5faa\u73af\u4f9d\u8d56\u5173\u7cfb\u65f6\uff0c\u8bf7\u4f7f\u7528\u60f0\u6027\u51fd\u6570\u63d0\u4f9b\u7c7b\u578b\u4fe1\u606f\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982 ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," \u5b57\u6bb5\u7684\u5faa\u73af\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"class Photo {\n  // ...\n  @ApiProperty({\n    type: () => Album\n  })\n  album: Album;\n}\nclass Album {\n  // ...\n  @ApiProperty({\n    type: () => Photo\n  })\n  photo: Photo;\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"getSchemaPath")," \u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export class CreateCatDto {\n  // ...\n\n  @ApiProperty({\n    type: 'array',\n    items: {\n      $ref: () => getSchemaPath(Cat)\n    }\n  })\n  relatedList: Cat[];\n}\n")),(0,r.kt)("h2",{id:"\u8bf7\u6c42\u5b9a\u4e49"},"\u8bf7\u6c42\u5b9a\u4e49"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://swagger.io/specification/"},"OpenAPI")," \u5b9a\u4e49\u7684 paths \u5c31\u662f\u5404\u4e2a\u8def\u7531\u8def\u5f84\uff0c\u4e14\u6bcf\u4e2a\u8def\u7531\u8def\u5f84\u90fd\u6709 HTTP \u65b9\u6cd5\u7684\u5b9a\u4e49\uff0c\u6bd4\u5982 GET\u3001POST\u3001DELETE\u3001PUT \u7b49\u3002"),(0,r.kt)("h3",{id:"query-\u5b9a\u4e49"},"Query \u5b9a\u4e49"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiQuery")," \u6765\u5b9a\u4e49 Query \u6570\u636e\u3002"),(0,r.kt)("p",null,"\u57fa\u7840\u4f7f\u7528\uff0c\u4f1a\u81ea\u52a8\u8bc6\u522b ",(0,r.kt)("inlineCode",{parentName:"p"},"@Query")," \u88c5\u9970\u5668\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@Get('/get_user')\nasync getUser(@Query('name') name: string) {\n  return 'hello';\n}\n")),(0,r.kt)("p",null,"\u5982\u679c ",(0,r.kt)("inlineCode",{parentName:"p"},"@Query"),"  \u4ee5\u5bf9\u8c61\u5f62\u5f0f\uff0c\u9700\u8981\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiQuery")," \u6307\u5b9a\u4e00\u4e2a name \u53c2\u6570\uff0c\u5bf9\u8c61\u7c7b\u578b\u9700\u8981\u914d\u5408 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiProperty")," \u4f7f\u7528\uff0c\u5426\u5219\u8868\u5355\u4f1a\u53d8\u4e3a\u53ea\u8bfb\u5f62\u5f0f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export class UserDTO {\n  @ApiProperty()\n  name: string;\n}\n\n@Get('/get_user')\n@ApiQuery({\n  name: 'query'\n})\nasync getUser(@Query() dto: UserDTO) {\n  // ...\n}\n")),(0,r.kt)("h3",{id:"body-\u5b9a\u4e49"},"Body \u5b9a\u4e49"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiBody")," \u6765\u5b9a\u4e49 Body \u6570\u636e\u3002"),(0,r.kt)("p",null," ",(0,r.kt)("inlineCode",{parentName:"p"},"@Body"),"  \u5bf9\u8c61\u7c7b\u578b\u9700\u8981\u914d\u5408 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiProperty")," \u4f7f\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export class UserDTO {\n  @ApiProperty()\n  name: string;\n}\n\n@Post('/update_user')\nasync upateUser(@Body() dto: UserDTO) {\n  // ...\n}\n")),(0,r.kt)("p",null,"\u5982\u9700\u5176\u4ed6\u7ec6\u8282\uff0c\u8bf7\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiBody")," \u589e\u5f3a\u3002"),(0,r.kt)("p",null,"\u6ce8\u610f\uff0cSwagger \u89c4\u5b9a\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Body")," \u5b9a\u4e49\u53ea\u80fd\u5b58\u5728\u4e00\u4e2a\uff0c\u5982\u679c\u914d\u7f6e\u4e86  ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiBody")," \uff0c\u5219\u7c7b\u578b\u63d0\u53d6\u7684\u6570\u636e\u4f1a\u81ea\u52a8\u88ab\u8986\u76d6\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982\u4e0b\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Body")," \u7684\u7c7b\u578b\u4f1a\u88ab\u66ff\u6362\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"Cat"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiBody({\n  type: Cat\n})\nasync upateUser(@Body() dto: UserDTO) {\n  // ...\n}\n")),(0,r.kt)("h3",{id:"\u6587\u4ef6\u4e0a\u4f20\u5b9a\u4e49"},"\u6587\u4ef6\u4e0a\u4f20\u5b9a\u4e49"),(0,r.kt)("p",null,"\u6587\u4ef6\u4e0a\u4f20\u662f Post \u8bf7\u6c42\u4e2d\u8f83\u4e3a\u7279\u6b8a\u7684\u4e00\u7c7b\u573a\u666f\u3002"),(0,r.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u5728 DTO \u4e2d\u5b9a\u4e49\u5c5e\u6027\u6765\u5b9e\u73b0\u591a\u4e2a\u6587\u4ef6\u4ee5\u53ca ",(0,r.kt)("inlineCode",{parentName:"p"},"Fields")," \u7684\u7c7b\u578b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { ApiProperty, BodyContentType } from \"@midwayjs/swagger\";\n\nexport class CreateCatDto {\n  // ...\n  @ApiProperty({\n    type: 'array',\n    items: {\n      type: 'string',\n      format: 'binary',\n    }\n  })\n  files: any;\n}\n\n// ...\n\n@Post('/test1')\n@ApiBody({\n  contentType: BodyContentType.Multipart,\n  schema: {\n    type: CreateCatDto,\n  }\n})\nasync upload1(@Files() files, @Fields() fields) {\n  // ...\n}\n")),(0,r.kt)("p",null,"Swagger UI \u4e2d\u5c55\u793a\uff1a\n",(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i3/O1CN01w9dZxe1YQJv3uOycZ_!!6000000003053-0-tps-1524-1118.jpg",alt:"swagger6"})),(0,r.kt)("p",null,"\u5982\u679c\u4e0d\u9700\u8981\u591a\u4e2a\u6587\u4ef6\uff0c\u4f7f\u7528 schema \u5b9a\u4e49\u5373\u53ef\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"export class CreateCatDto {\n  // ...\n  @ApiProperty({\n    type: 'string',\n    format: 'binary',\n  })\n  file: any;\n}\n")),(0,r.kt)("p",null,"Swagger UI \u4e2d\u5c55\u793a\uff1a\n",(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i3/O1CN01KlDHNt24mMglN1fyH_!!6000000007433-0-tps-1598-434.jpg",alt:"swagger4"})),(0,r.kt)("h3",{id:"\u8bf7\u6c42-header"},"\u8bf7\u6c42 Header"),(0,r.kt)("p",null,"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiHeader({...})")," \u88c5\u9970\u5668\u6765\u5b9a\u4e49 Header \u53c2\u6570\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiHeader({\n  name: 'x-test-one',\n  description: 'this is test one'\n})\n@ApiTags(['hello'])\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i1/O1CN01n8Xgn729GphI6XzXk_!!6000000008041-2-tps-1234-584.png",alt:null})),(0,r.kt)("h3",{id:"\u8bf7\u6c42-response"},"\u8bf7\u6c42 Response"),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiResponse({...})")," \u6765\u81ea\u5b9a\u4e49\u8bf7\u6c42 Response\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@Get('/:id')\n@ApiResponse({\n  status: 200,\n  description: 'The found record',\n  type: Cat,\n})\nfindOne(@Param('id') id: string, @Query('test') test: any): Cat {\n  return this.catsService.findOne(+id);\n}\n")),(0,r.kt)("p",null,"\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u4e0d\u9700\u8981\u8bbe\u7f6e status \u7684\u88c5\u9970\u5668\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiOkResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiCreatedResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiAcceptedResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiNoContentResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiMovedPermanentlyResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiBadRequestResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiUnauthorizedResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiNotFoundResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiForbiddenResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiMethodNotAllowedResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiNotAcceptableResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiRequestTimeoutResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiConflictResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiTooManyRequestsResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiGoneResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiPayloadTooLargeResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiUnsupportedMediaTypeResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiUnprocessableEntityResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiInternalServerErrorResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiNotImplementedResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiBadGatewayResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiServiceUnavailableResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiGatewayTimeoutResponse()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@ApiDefaultResponse()"))),(0,r.kt)("p",null,"HTTP \u8bf7\u6c42\u8fd4\u56de\u7684\u6570\u636e\u6a21\u578b\u5b9a\u4e49\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a type\uff0c\u5f53\u7136\u8fd9\u4e2a\u6570\u636e\u6a21\u578b\u9700\u8981\u901a\u8fc7\u88c5\u9970\u5668 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiProperty")," \u6765\u63cf\u8ff0\u5404\u4e2a\u5b57\u6bb5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { ApiProperty } from '@midwayjs/swagger';\n\nexport class Cat {\n  @ApiProperty({ example: 'Kitty', description: 'The name of the Cat'})\n  name: string;\n\n  @ApiProperty({ example: 1, description: 'The age of the Cat' })\n  age: number;\n\n  @ApiProperty({\n    example: 'Maine Coon',\n    description: 'The breed of the Cat',\n  })\n  breed: string;\n}\n")),(0,r.kt)("p",null,"Swagger \u8fd8\u652f\u6301\u5e26\u524d\u7f00 ",(0,r.kt)("inlineCode",{parentName:"p"},"x-")," \u7684\u6269\u5c55\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiExtension(x-..., {...})")," \u88c5\u9970\u5668\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiExtension('x-hello', { hello: 'world' })\n")),(0,r.kt)("p",null,"\u5f53\u4e0d\u5e0c\u671b\u901a\u8fc7 type \u6765\u5b9a\u4e49 model \u7c7b\u578b\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728 Controller \u4e2d\u6216\u8005 Model Class \u4e2d\u52a0\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiExtraModel")," \u6765\u589e\u52a0\u989d\u5916\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"schema")," \u7c7b\u578b\u63cf\u8ff0\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiExtraModel(TestExtraModel)\n@Controller()\nclass HelloController {\n  @Post('/:id', { summary: 'test'})\n  @ApiResponse({\n    status: 200,\n    content: {\n      'application/json': {\n        schema: {\n          properties: {\n            data: { '$ref': getSchemaPath(TestExtraModel)}\n          }\n        }\n      }\n    }\n  })\n  async create(@Body() createCatDto: CreateCatDto, @Param('id') id: number): Promise<Cat> {\n    return this.catsService.create(createCatDto);\n  }\n}\n\n// or\n@ApiExtraModel(TestExtraModel)\nclass TestModel {\n  @ApiProperty({\n    item: {\n      $ref: getSchemaPath(TestExtraModel)\n    },\n    description: 'The name of the Catage'\n  })\n  one: TestExtraModel;\n}\n")),(0,r.kt)("h3",{id:"\u6cdb\u578b\u8fd4\u56de\u6570\u636e"},"\u6cdb\u578b\u8fd4\u56de\u6570\u636e"),(0,r.kt)("p",null,"Swagger \u672c\u8eab\u4e0d\u652f\u6301\u6cdb\u578b\u6570\u636e\uff0c\u6cdb\u578b\u4f5c\u4e3a Typescript \u7684\u4e00\u79cd\u7c7b\u578b\uff0c\u4f1a\u5728\u6784\u5efa\u671f\u62b9\u6389\uff0c\u5728\u8fd0\u884c\u65f6\u65e0\u6cd5\u8bfb\u53d6\u3002"),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e9b\u53d6\u5de7\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982\uff0c\u6211\u4eec\u9700\u8981\u5c06\u8fd4\u56de\u503c\u589e\u52a0\u4e00\u4e9b\u901a\u7528\u7684\u5305\u88f9\u7ed3\u6784\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"{\n  code: 200,\n  message: 'xxx',\n  data: any\n}\n")),(0,r.kt)("p",null,"\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5165\u53c2\u662f\u8fd4\u56de\u7684 data\uff0c\u8fd4\u56de\u4e00\u4e2a\u5305\u88f9\u7684\u7c7b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Type } from '@midwayjs/swagger';\n\ntype Res<T> = {\n  code: number;\n  message: string;\n  data: T;\n}\n\nexport function SuccessWrapper<T>(ResourceCls: Type<T>): Type<Res<T>> {\n  class Successed {\n    @ApiProperty({ description: '\u72b6\u6001\u7801' })\n    code: number;\n\n    @ApiProperty({ description: '\u6d88\u606f' })\n    message: string;\n\n    @ApiProperty({\n      type: ResourceCls,\n    })\n    data: T;\n  }\n\n  return Successed;\n}\n")),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u6765\u5b9e\u73b0\u6211\u4eec\u81ea\u5df1\u7684\u8fd4\u56de\u7c7b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"class ViewCat extends SuccessWrapper<Cat>(Cat) {}\n")),(0,r.kt)("p",null,"\u5728\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u8fd9\u4e2a\u7c7b\u5373\u53ef\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@Get('/:id')\n@ApiResponse({\n  status: 200,\n  description: 'The found record',\n  type: ViewCat,\n})\nasync findOne(@Param('id') id: string, @Query('test') test: any): ViewCat {\n  // ...\n}\n")),(0,r.kt)("h2",{id:"\u66f4\u591a\u7684\u5b9a\u4e49\u793a\u4f8b"},"\u66f4\u591a\u7684\u5b9a\u4e49\u793a\u4f8b"),(0,r.kt)("p",null,"Swagger \u4e2d\u8fd8\u6709\u66f4\u591a\u7684\u5199\u6cd5\uff0c\u6846\u67b6\u90fd\u8fdb\u884c\u4e86\u652f\u6301\uff0c\u66f4\u591a\u7528\u6cd5\u53ef\u4ee5\u67e5\u770b\u6211\u4eec\u7684 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/midwayjs/midway/blob/main/packages/swagger/test/parser.test.ts"},"\u6d4b\u8bd5\u7528\u4f8b"),"\u3002"),(0,r.kt)("h2",{id:"\u66f4\u591a\u914d\u7f6e"},"\u66f4\u591a\u914d\u7f6e"),(0,r.kt)("h3",{id:"\u8def\u7531\u6807\u7b7e"},"\u8def\u7531\u6807\u7b7e"),(0,r.kt)("p",null,"Swagger \u4f1a\u5bf9 paths \u5206\u6807\u7b7e\uff0c\u5982\u679c Controller \u672a\u5b9a\u4e49\u4efb\u4f55\u6807\u7b7e\uff0c\u5219\u4f1a\u9ed8\u8ba4\u5f52\u7ec4\u5230 default \u4e0b\u3002\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiTags([...])")," \u6765\u81ea\u5b9a\u4e49 Controller \u6807\u7b7e\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiTags(['hello'])\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u7ed9 Tag \u6dfb\u52a0\u63cf\u8ff0\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\n\nexport default {\n  swagger: {\n    tags: [\n      {\n        name: 'api',\n        description: 'API Document'\n      },\n      {\n        name: 'hello',\n        description: 'Other Router'\n      },\n    ]\n  }\n}\n\n")),(0,r.kt)("p",null,"\u4e5f\u53ef\u4ee5\u52a0\u5728\u8def\u7531\u65b9\u6cd5\u4e0a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// ...\nexport class HomeController {\n  @ApiTags(['bbb'])\n  @Get('/')\n  async home(@Body() dto?: Photo): Promise<string> {\n    return 'Hello Midwayjs!';\n  }\n}\n")),(0,r.kt)("h3",{id:"\u6388\u6743\u9a8c\u8bc1"},"\u6388\u6743\u9a8c\u8bc1"),(0,r.kt)("p",null,"\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u6388\u6743\u9a8c\u8bc1\u914d\u7f6e\u6765\u8bbe\u7f6e\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u6211\u4eec\u652f\u6301\u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"basic"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"bearer"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"cookie"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"oauth2"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"apikey"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"custom"),"\u3002"),(0,r.kt)("h4",{id:"basic"},"basic"),(0,r.kt)("p",null,"\u542f\u7528 basic \u9a8c\u8bc1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nexport default {\n  // ...\n  swagger: {\n    auth: {\n      authType: 'basic',\n    },\n  },\n}\n")),(0,r.kt)("p",null,"\u5173\u8054 Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiBasicAuth()\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("h4",{id:"bearer"},"bearer"),(0,r.kt)("p",null,"\u542f\u7528 bearer \u9a8c\u8bc1\uff08bearerFormat \u4e3a JWT\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nexport default {\n  // ...\n  swagger: {\n    auth: {\n      authType: 'bearer',\n    },\n  },\n}\n")),(0,r.kt)("p",null,"\u5173\u8054 Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiBearerAuth()\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("h4",{id:"oauth2"},"oauth2"),(0,r.kt)("p",null,"\u542f\u7528 oauth2 \u9a8c\u8bc1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nexport default {\n  // ...\n  swagger: {\n    auth: {\n      authType: 'oauth2',\n      flows: {\n        implicit: {\n          authorizationUrl: 'http://example.org/api/oauth/dialog',\n          scopes: {\n            'write:pets': 'modify pets in your account',\n            'read:pets': 'read your pets'\n          }\n        },\n        authorizationCode: {\n          authorizationUrl: 'https://example.com/api/oauth/dialog',\n          tokenUrl: 'https://example.com/api/oauth/token',\n          scopes: {\n            'write:pets': 'modify pets in your account',\n            'read:pets': 'read your pets'\n          }\n        },\n      },\n    },\n  },\n}\n")),(0,r.kt)("p",null,"\u5173\u8054 Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiOAuth2()\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("h4",{id:"cookie"},"cookie"),(0,r.kt)("p",null,"\u542f\u7528 cookie \u9a8c\u8bc1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nexport default {\n  // ...\n  swagger: {\n    auth: {\n      authType: 'cookie',\n      securityName: 'testforcookie',\n      cookieName: 'connect.sid',\n    },\n  },\n}\n")),(0,r.kt)("p",null,"\u5173\u8054 Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiCookieAuth('testforcookie')\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("h4",{id:"apikey"},"apikey"),(0,r.kt)("p",null,"\u542f\u7528 cookie \u9a8c\u8bc1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nexport default {\n  // ...\n  swagger: {\n    auth: {\n      authType: 'apikey',\n        name: 'api_key'\n    },\n  },\n}\n")),(0,r.kt)("p",null,"\u5173\u8054 Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiSecurity('api_key')\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("h4",{id:"custom-\u9a8c\u8bc1"},"custom \u9a8c\u8bc1"),(0,r.kt)("p",null,"\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u9700\u8981\u81ea\u5df1\u8bbe\u8ba1\u53c2\u6570\u914d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nexport default {\n  // ...\n  swagger: {\n    auth: {\n      authType: 'custom',\n      name: 'mycustom'\n      // ...\n    },\n  },\n}\n")),(0,r.kt)("p",null,"\u5173\u8054 Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiSecurity('mycustom')\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("h3",{id:"\u5ffd\u7565\u8def\u7531"},"\u5ffd\u7565\u8def\u7531"),(0,r.kt)("p",null,"\u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiExcludeController"),"  \u53ef\u4ee5\u5ffd\u7565\u6574\u4e2a Controller \u7684\u8def\u7531\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@ApiExcludeController()\n@Controller('/hello')\nexport class HelloController {}\n")),(0,r.kt)("p",null,"\u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiExcludeEndpoint")," \u53ef\u4ee5\u5ffd\u7565\u5355\u4e2a\u8def\u7531\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"@Controller('/hello')\nexport class HelloController {\n  \n  @ApiExcludeEndpoint()\n  @Get()\n  async getUser() {\n    // ...\n  }\n}\n")),(0,r.kt)("p",null,"\u5982\u679c\u9700\u8981\u6ee1\u8db3\u66f4\u52a0\u52a8\u6001\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u8def\u7531\u8fc7\u6ee4\u5668\u6765\u6279\u91cf\u8fc7\u6ee4\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nimport { RouterOption } from '@midwayjs/core';\n\nexport default {\n  // ...\n  swagger: {\n    routerFilter: (url: string, options: RouterOption) => {\n      return url === '/hello/getUser';\n    }\n  },\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"routerFilter")," \u7528\u6765\u4f20\u5165\u4e00\u4e2a\u8fc7\u6ee4\u51fd\u6570\uff0c\u5305\u542b ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"routerOptions")," \u4e24\u4e2a\u53c2\u6570\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"routerOptions")," \u4e2d\u5305\u542b\u4e86\u8def\u7531\u57fa\u7840\u4fe1\u606f\u3002"),(0,r.kt)("p",null,"\u6bcf\u5f53\u5339\u914d\u5230\u4e00\u4e2a\u8def\u7531\u65f6\uff0c\u4f1a\u81ea\u52a8\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"routerFilter")," \u65b9\u6cd5\uff0c\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"routerFilter")," \u8fd4\u56de true \u65f6\uff0c\u4ee3\u8868\u8fd9\u4e2a\u8def\u7531\u5c06\u4f1a\u88ab\u8fc7\u6ee4\u3002"),(0,r.kt)("h3",{id:"\u5b8c\u6574\u53c2\u6570\u914d\u7f6e"},"\u5b8c\u6574\u53c2\u6570\u914d\u7f6e"),(0,r.kt)("p",null,"Swagger \u7ec4\u4ef6\u63d0\u4f9b\u4e86\u548c ",(0,r.kt)("a",{parentName:"p",href:"https://swagger.io/specification/"},"OpenAPI")," \u4e00\u81f4\u7684\u53c2\u6570\u914d\u7f6e\u80fd\u529b\uff0c\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u914d\u7f6e\u6765\u5b9e\u73b0\u3002"),(0,r.kt)("p",null,"\u914d\u7f6e\u9879\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"/**\n * see https://swagger.io/specification/\n */\nexport interface SwaggerOptions {\n  /**\n   * \u9ed8\u8ba4\u503c: My Project\n   * https://swagger.io/specification/#info-object title \u5b57\u6bb5\n   */\n  title?: string;\n  /**\n   * \u9ed8\u8ba4\u503c: This is a swagger-ui for midwayjs project\n   * https://swagger.io/specification/#info-object description \u5b57\u6bb5\n   */\n  description?: string;\n  /**\n   * \u9ed8\u8ba4\u503c: 1.0.0\n   * https://swagger.io/specification/#info-object version \u5b57\u6bb5\n   */\n  version?: string;\n  /**\n   * https://swagger.io/specification/#info-object contact \u5b57\u6bb5\n   */\n  contact?: ContactObject;\n  /**\n   * https://swagger.io/specification/#info-object license \u5b57\u6bb5\n   */\n  license?: LicenseObject;\n  /**\n   * https://swagger.io/specification/#info-object termsOfService \u5b57\u6bb5\n   */\n  termsOfService?: string;\n  /**\n   * https://swagger.io/specification/#openapi-object externalDocs \u5b57\u6bb5\n   */\n  externalDocs?: ExternalDocumentationObject;\n  /**\n   * https://swagger.io/specification/#openapi-object servers \u5b57\u6bb5\n   */\n  servers?: Array<ServerObject>;\n  /**\n   * https://swagger.io/specification/#openapi-object tags \u5b57\u6bb5\n   */\n  tags?: Array<TagObject>;\n  /**\n   * \u53ef\u4ee5\u53c2\u8003 https://swagger.io/specification/#security-scheme-object\n   */\n  auth?: AuthOptions | AuthOptions[];\n  /**\n   * \u9ed8\u8ba4\u503c: /swagger-ui\n   * \u8bbf\u95ee swagger ui \u7684\u8def\u5f84\n   */\n  swaggerPath?: string;\n  /**\n   * \u5bf9\u8def\u7531 tag \u8fdb\u884c ascii \u6392\u5e8f\n   * \u53ef\u4ee5\u4f7f\u7528 1-xxx\u30012-xxx\u30013-xxx \u6765\u5b9a\u4e49 tag\n   */\n  tagSortable?: boolean;\n  /**\n   * UI \u5c55\u793a\u4e2d\u9700\u8981\u7528\u5230\u7684\u914d\u7f6e\n   * \u53ef\u4ee5\u53c2\u8003 https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md#display\n   */\n  displayOptions?: {\n    deepLinking?: boolean;\n    displayOperationId?: boolean;\n    defaultModelsExpandDepth?: number;\n    defaultModelExpandDepth?: number;\n    defaultModelRendering?: 'example' | 'model';\n    displayRequestDuration?: boolean;\n    docExpansion?: 'list' | 'full' | 'none';\n    filter?: boolean | string;\n    maxDisplayedTags?: number;\n    showExtensions?: boolean;\n    showCommonExtensions?: boolean;\n    useUnsafeMarkdown?: boolean;\n    tryItOutEnabled?: boolean;\n  };\n  \n  documentOptions?: {\n    /**\n     * \u81ea\u5b9a\u4e49 operationIdFactory\uff0c\u7528\u4e8e\u751f\u6210 operationId\n     * @default () => controllerKey_webRouter.methodKey\n     */\n    operationIdFactory?: (\n      controllerKey: string,\n      webRouter: RouterOption\n    ) => string;\n  };\n}\n\n/**\n * \u7ee7\u627f\u81ea https://swagger.io/specification/#security-scheme-object\n */\nexport interface AuthOptions extends Omit<SecuritySchemeObject, 'type'> {\n  /**\n   * \u9a8c\u6743\u7c7b\u578b\n   * basic  => http basic \u9a8c\u8bc1\n   * bearer => http jwt \u9a8c\u8bc1\n   * cookie => cookie \u65b9\u5f0f\u9a8c\u8bc1\n   * oauth2 => \u4f7f\u7528 oauth2\n   * apikey => apiKey\n   * custom => \u81ea\u5b9a\u4e49\u65b9\u5f0f\n   */\n  authType: AuthType;\n  /**\n   * https://swagger.io/specification/#security-scheme-object type \u5b57\u6bb5\n   */\n  type?: SecuritySchemeType;\n  /**\n   * authType = cookie \u65f6\u53ef\u4ee5\u4fee\u6539\uff0c\u901a\u8fc7 ApiCookie \u88c5\u9970\u5668\u5173\u8054\u7684\u540d\u79f0\n   */\n  securityName?: string;\n  /**\n   * authType = cookie \u65f6\u53ef\u4ee5\u4fee\u6539\uff0ccookie \u7684\u540d\u79f0\n   */\n  cookieName?: string;\n}\n")),(0,r.kt)("h2",{id:"\u88c5\u9970\u5668\u5217\u8868"},"\u88c5\u9970\u5668\u5217\u8868"),(0,r.kt)("p",null,"\u7ec4\u4ef6\u6240\u6709\u88c5\u9970\u5668\u53c2\u8003\u4e86 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nestjs/swagger"},"@nestjs/swagger")," \u7684\u8bbe\u8ba1\uff0c\u90fd\u5e26 ",(0,r.kt)("inlineCode",{parentName:"p"},"Api")," \u524d\u7f00\u3002\u8fd9\u91cc\u5217\u51fa\u5168\u90e8\u88c5\u9970\u5668\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u88c5\u9970\u5668"),(0,r.kt)("th",{parentName:"tr",align:null},"\u652f\u6301\u6a21\u5f0f"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiBody")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiExcludeEndpoint")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiExcludeController")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiHeader")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller/Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiHeaders")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller/Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiOperation")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiProperty")),(0,r.kt)("td",{parentName:"tr",align:null},"Model Property")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiPropertyOptional")),(0,r.kt)("td",{parentName:"tr",align:null},"Model Property")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiResponseProperty")),(0,r.kt)("td",{parentName:"tr",align:null},"Model Property")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiQuery")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiResponse")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiTags")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller/Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiExtension")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiBasicAuth")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiBearerAuth")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiCookieAuth")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiOAuth2")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiSecurity")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiExcludeSecurity")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiParam")),(0,r.kt)("td",{parentName:"tr",align:null},"Method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ApiExtraModel")),(0,r.kt)("td",{parentName:"tr",align:null},"Controller")))),(0,r.kt)("h2",{id:"ui-\u6e32\u67d3"},"UI \u6e32\u67d3"),(0,r.kt)("h3",{id:"\u4ece-swagger-ui-dist-\u6e32\u67d3"},"\u4ece Swagger-ui-dist \u6e32\u67d3"),(0,r.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b89\u88c5\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-ui-dist")," \u5305\uff0c\u7ec4\u4ef6\u4f1a\u9ed8\u8ba4\u4f1a\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"renderSwaggerUIDist")," \u6e32\u67d3 swagger ui\uff0c\u5982\u679c\u9700\u8981\u4f20\u9012 swagger-ui \u7684 options\uff0c\u53ef\u4ee5 \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"swaggerUIRenderOptions")," \u9009\u9879\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nimport { renderSwaggerUIDist } from '@midwayjs/swagger';\n\nexport default {\n  // ...\n  swagger: {\n    swaggerUIRender: renderSwaggerUIDist,\n    swaggerUIRenderOptions: {\n      // ...\n    }\n  },\n}\n")),(0,r.kt)("p",null,"\u5982\u679c\u5e0c\u671b\u8c03\u6574 UI \u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u6587\u4ef6\u7684\u65b9\u5f0f\u66ff\u6362\u9ed8\u8ba4\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-initializer.js"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nimport { AppInfo } from '@midwayjs/core';\nimport { renderSwaggerUIDist } from '@midwayjs/swagger';\nimport { join } from 'path';\n\nexport default (appInfo: AppInfo) {\n  return {\n    // ...\n    swagger: {\n      swaggerUIRender: renderSwaggerUIDist,\n      swaggerUIRenderOptions: {\n        customInitializer: join(appInfo.appDir, 'resource/swagger-initializer.js'),\n      }\n    },\n  }\n}\n")),(0,r.kt)("p",null,"\u81ea\u5b9a\u4e49\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-initializer.js")," \u5185\u5bb9\u5927\u81f4\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'window.onload = function() {\n  window.ui = SwaggerUIBundle({\n    url: "/index.json",\n    dom_id: \'#swagger-ui\',\n    deepLinking: true,\n    presets: [\n      SwaggerUIBundle.presets.apis,\n      SwaggerUIStandalonePreset\n    ],\n    plugins: [\n      SwaggerUIBundle.plugins.DownloadUrl\n    ],\n    layout: "StandaloneLayout",\n    persistAuthorization: true,\n  });\n};\n\n')),(0,r.kt)("p",null,"\u5176\u4e2d\u7684 url \u6307\u5411\u5f53\u524d\u7684 swagger json\uff0c\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\uff0c\u5b8c\u6574\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-ui")," \u914d\u7f6e\u8bf7\u53c2\u8003 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md"},"\u8fd9\u91cc"),"\u3002"),(0,r.kt)("h3",{id:"\u4ece-unpkg-\u7b49-cdn-\u5730\u5740\u6e32\u67d3"},"\u4ece unpkg \u7b49 CDN \u5730\u5740\u6e32\u67d3"),(0,r.kt)("p",null,"\u5982\u679c\u672a\u5b89\u88c5 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-ui-dist")," \u5305\uff0c\u4f1a\u81ea\u52a8\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"renderSwaggerUIRemote")," \u65b9\u6cd5\u8fdb\u884c\u6e32\u67d3\uff0c\u9ed8\u8ba4\u7531 ",(0,r.kt)("inlineCode",{parentName:"p"},"unpkg.com")," \u63d0\u4f9b cdn \u8d44\u6e90\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nimport { renderSwaggerUIRemote } from '@midwayjs/swagger';\n\nexport default {\n  // ...\n  swagger: {\n    swaggerUIRender: renderSwaggerUIRemote,\n    swaggerUIRenderOptions: {\n      // ...\n    }\n  },\n}\n")),(0,r.kt)("h3",{id:"\u4ec5\u63d0\u4f9b-swagger-json"},"\u4ec5\u63d0\u4f9b Swagger JSON"),(0,r.kt)("p",null,"\u5982\u679c\u4ec5\u5e0c\u671b\u63d0\u4f9b Swagger JSON\uff0c\u53ef\u4ee5\u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"renderJSON")," \u4ec5\u6e32\u67d3 JSON \uff0c\u65e0\u9700\u5f15\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"swagger-ui-dist")," \u5305\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/config/config.default.ts\nimport { renderJSON } from '@midwayjs/swagger';\n\nexport default {\n  // ...\n  swagger: {\n    swaggerUIRender: renderJSON,\n  },\n}\n")),(0,r.kt)("h2",{id:"\u5e38\u89c1\u95ee\u9898"},"\u5e38\u89c1\u95ee\u9898"),(0,r.kt)("h3",{id:"get-\u7b49\u8def\u7531\u6ce8\u89e3\u4e2d\u7684-summary-\u6216\u8005-description-\u4e0d\u751f\u6548"},(0,r.kt)("inlineCode",{parentName:"h3"},"@Get")," \u7b49\u8def\u7531\u6ce8\u89e3\u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"h3"},"summary")," \u6216\u8005 ",(0,r.kt)("inlineCode",{parentName:"h3"},"description")," \u4e0d\u751f\u6548"),(0,r.kt)("p",null,"\u5f53\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiOperation")," \u65f6\u5019\uff0c\u5c06\u4f18\u5148\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiOperation")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"summary")," \u6216\u8005 ",(0,r.kt)("inlineCode",{parentName:"p"},"description"),"\uff0c\u6240\u4ee5\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"@ApiOperation")," \u4e0e ",(0,r.kt)("inlineCode",{parentName:"p"},"@Get")," \u7b49\u8def\u7531\u6ce8\u89e3\u4e2d\uff0c\u53ea\u9700\u8981\u5199\u4e00\u4e2a\u5373\u53ef\u3002"))}u.isMDXComponent=!0}}]);