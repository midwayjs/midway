service:
  name: serverless-midway-test
provider:
  name: aliyun
functions:
  render2:
    handler: render2.handler
    events:
      - http:
          method: get
          path: /render/2
  api: &ref_0
    functionsPattern:
      - api*
    handler: api.handler
    _isAggregation: true
    events:
      - http:
          method: any
          path: /api/*
    _handlers:
      - handler: api1.handler
        events:
          - http:
              method: get
              path: /api/1
        path: /api/1
      - handler: api2.handler
        events:
          - http:
              method: get
              path: /api/2
        path: /api/2
      - handler: api3.handler
        events:
          - http:
              method: get
              path: /api/3
        path: /api/3
      - handler: apiall.handler
        events:
          - http:
              method: get
              path: /api/*
        path: /api/*
    _allAggred:
      - path: /api/1
        method: get
      - path: /api/2
        method: get
      - path: /api/3
        method: get
      - path: /api/*
        method: get
  renderNot2: &ref_1
    functionsPattern:
      - render*
      - '!render2'
    handler: renderNot2.handler
    _isAggregation: true
    events:
      - http:
          method: any
          path: /*
    _handlers:
      - handler: render.handler
        events:
          - http:
              method: get
              path: /render
        path: /render
      - handler: render1.handler
        events:
          - http:
              method: get
              path: /render/1
        path: /render/1
    _allAggred:
      - path: /render
        method: get
      - path: /render/1
        method: get
  normal: &ref_2
    functions:
      - normal1
      - normal2
    functionsPattern:
      - '!normal*'
    handler: normal.handler
    _isAggregation: true
    events:
      - http:
          method: any
          path: /normal/*
    _handlers:
      - handler: normal1.handler
        events:
          - http:
              method: get
              path: /normal/1
        path: /normal/1
      - handler: normal2.handler
        events:
          - http:
              method: get
              path: /normal/2
        path: /normal/2
    _allAggred:
      - path: /normal/1
        method: get
      - path: /normal/2
        method: get
custom:
  customDomain:
    domainName: fctest.iam.gy
aggregation:
  api: *ref_0
  renderNot2: *ref_1
  normal: *ref_2
globalDependencies:
  picomatch: '*'
