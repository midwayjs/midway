"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[17464],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},49372:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=n(87462),o=(n(67294),n(3905));const a={},i="Lint tools and formatting",l={unversionedId:"tool/mwts",id:"tool/mwts",title:"Lint tools and formatting",description:"Midway's framework and business code are written by TypeScript. The default Midway provides a set of default lint, editor and formatting rules for more convenient development and testing.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/tool/mwts.md",sourceDirName:"tool",slug:"/tool/mwts",permalink:"/en/docs/tool/mwts",draft:!1,editUrl:"https://github.com/midwayjs/midway/tree/main/site/docs/tool/mwts.md",tags:[],version:"current",frontMatter:{},sidebar:"common",previous:{title:"Version check tool",permalink:"/en/docs/tool/version_check"},next:{title:"Rule check tool",permalink:"/en/docs/tool/luckyeye"}},c={},s=[{value:"Code style library",id:"code-style-library",level:2},{value:"ESLint configuration",id:"eslint-configuration",level:2},{value:"Perform code checking and formatting",id:"perform-code-checking-and-formatting",level:2},{value:"Prettier configuration",id:"prettier-configuration",level:2},{value:"Configure save automatic formatting",id:"configure-save-automatic-formatting",level:2}],p={toc:s},d="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"lint-tools-and-formatting"},"Lint tools and formatting"),(0,o.kt)("p",null,"Midway's framework and business code are written by TypeScript. The default Midway provides a set of default lint, editor and formatting rules for more convenient development and testing."),(0,o.kt)("h2",{id:"code-style-library"},"Code style library"),(0,o.kt)("p",null,"The code style library of Midway is called ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/midwayjs/mwts"},"mwts"),", which is derived from Google's ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/google/gts"},"gts"),". Mwts is Midway's TypeScript style guide and the configuration of formatter, linter and automatic code fix."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"In the midway project, we will add mwts by default. The following process is just to explain how to use mwts.")),(0,o.kt)("p",null,"In order to use mwts, we need to add it to the development dependency."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'  "devDependencies": {\n    "mwts": "^1.0.5 ",\n    "typescript": "^4.0.0"\n  },\n')),(0,o.kt)("h2",{id:"eslint-configuration"},"ESLint configuration"),(0,o.kt)("p",null,"Mwts provides a default set of ESLint configurations (TSLint has been abandoned and merged into ESLint)."),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},".eslintrc.json")," file in the root directory of the project, with the following contents (usually scaffolding will bring it with it):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "extends": "./node_modules/mwts /",\n  "ignorePatterns": ["node_modules", "dist", "test", "jest.config.js", "interface.ts"]\n  "env": {\n    "jest": true\n  }\n}\n')),(0,o.kt)("p",null,"The above is the default configuration of midway project. Other project ",(0,o.kt)("inlineCode",{parentName:"p"},"ignorePatterns")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"env")," can be adjusted according to ESLint."),(0,o.kt)("p",null,"For more information about the default rules for mwts, see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/midwayjs/mwts/blob/master/.eslintrc.json"},"here"),"."),(0,o.kt)("h2",{id:"perform-code-checking-and-formatting"},"Perform code checking and formatting"),(0,o.kt)("p",null,"You can run the ",(0,o.kt)("inlineCode",{parentName:"p"},"mwts check")," command and the ",(0,o.kt)("inlineCode",{parentName:"p"},"mwts fix")," command to check the code. For example, add script commands to the project (usually scaffolding will come with it)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'  "scripts": {\n    "lint": "mwts check ",\n    "lint:fix": "mwts fix",\n  },\n')),(0,o.kt)("h2",{id:"prettier-configuration"},"Prettier configuration"),(0,o.kt)("p",null,"Mwts provides a set of default prettier configurations, creating a ",(0,o.kt)("inlineCode",{parentName:"p"},".prettierrc.js")," file with the following configuration contents (usually scaffolding comes with it)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  ...require('mwts/.prettierrc.json')\n};\n")),(0,o.kt)("h2",{id:"configure-save-automatic-formatting"},"Configure save automatic formatting"),(0,o.kt)("p",null,"Let's take VSCode as an example."),(0,o.kt)("p",null,"The first step is to install the Prettier plug-in."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618042429530-177c3636-aefc-419d-8d3a-5258cad13631.png",alt:null})),(0,o.kt)("p",null,'Open the configuration, search for "save", find "Format On Save" on the right, and check.'),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618042494782-71b6cc3c-18ae-4344-987b-ec82084f2dd8.png",alt:null})),(0,o.kt)("p",null,"If saving the file has no effect, the editor usually has multiple formatting methods, you can right-click to make the default selection."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618125271116-845e8452-0f7b-46a9-a28a-388f2db9c5e3.png",alt:null})),(0,o.kt)("p",null,'Select Configure Default Formatters ".'),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618125381302-d3fe30c1-e56d-43f8-ada2-6e315f4ff2c4.png",alt:null})),(0,o.kt)("p",null,"Select Prettier."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618125423564-8e46b0f8-f422-4e3d-a805-3b0a1db037f8.png",alt:null})))}u.isMDXComponent=!0}}]);